suite: rafiki-boutique secrets - Secrets
templates:
  - secrets.backend.yaml
set:
  fullnameOverride: test-rafiki-boutique
  config:
    backend:
      shouldCreateSecrets: true
release:
  name: test-rafiki-boutique
tests:
  - it: 'backend secret should be created when shouldCreateSecrets is true'
    asserts:
      - equal:
          path: metadata.name
          value: test-rafiki-boutique-backend
      - equal:
          path: kind
          value: Secret
      - isNotEmpty:
          path: data.DATABASE_URL
      - isNotEmpty:
          path: data.PRIVATE_KEY
  - it: 'backend secret should not be created when shouldCreateSecrets is false'
    set:
      config:
        backend:
          shouldCreateSecrets: false
    asserts:
      - hasDocuments:
          count: 0
