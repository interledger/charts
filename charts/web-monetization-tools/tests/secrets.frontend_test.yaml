suite: web-monetization-tools frontend - frontend Secrets
templates:
  - secrets.frontend.yaml
set:
  fullnameOverride: test-web-monetization-tools
release:
  name: test-web-monetization-tools
tests:
  - it: 'should create secret with correct name when shouldCreateSecrets is true'
    asserts:
      - equal:
          path: metadata.name
          value: test-web-monetization-tools-frontend
      - equal:
          path: kind
          value: Secret
      - isNotEmpty:
          path: data
  - it: 'should not create secret when shouldCreateSecrets is false'
    set:
      config:
        frontend:
          shouldCreateSecrets: false
    asserts:
      - hasDocuments:
          count: 0
  - it: 'should create secret with correct data'
    set:
      config:
        frontend:
          openpayments:
            secretPrivateKey: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
    asserts:
      - equal:
          path: data["openpayments.secretPrivateKey"]
          value: QUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFB
