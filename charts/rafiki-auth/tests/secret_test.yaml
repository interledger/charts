suite: Rafiki Auth - Secret validation test
templates:
  - secret.yaml
release:
  name: rafiki-auth
tests:
  # postgresql.auth.username
  - it: "given postgresql.auth.username not set then should fail"
    set:
      postgresql:
        auth:
          username: ""
    asserts:
      - failedTemplate:
          errorMessage: "postgresql.auth.username must be set"
  # postgresql.auth.password
  - it: "given postgresql.auth.password not set then should fail"
    set:
      postgresql:
        auth:
          password: ""
    asserts:
      - failedTemplate:
          errorMessage: "postgresql.auth.password must be set"
  # postgresql.host
  - it: "given postgresql.host not set then should fail"
    set:
      postgresql:
        host: ""
    asserts:
      - failedTemplate:
          errorMessage: "postgresql.host must be set"
  # postgresql.port
  - it: "given postgresql.port not set then should fail"
    set:
      postgresql:
        port: ""
    asserts:
      - failedTemplate:
          errorMessage: "postgresql.port must be set"
  # postgresql.auth.database
  - it: "given postgresql.auth.database not set then should fail"
    set:
      postgresql:
        auth:
          database: ""
    asserts:
      - failedTemplate:
          errorMessage: "postgresql.auth.database must be set"
  # redis.port
  - it: "given redis.port not set then should fail"
    set:
      redis:
        port: ""
    asserts:
      - failedTemplate:
          errorMessage: "redis.port must be set"
  # redis.host
  - it: "given redis.host not set then should fail"
    set:
      redis:
        host: ""
    asserts:
      - failedTemplate:
          errorMessage: "redis.host must be set"
  # cookieKey
  - it: "given cookieKey not set then should fail"
    set:
      cookieKey: ""
    asserts:
      - failedTemplate:
          errorMessage: "cookieKey must be set"
  # identityServer.secret
  - it: "given identityServer.secret not set then should fail"
    set:
      identityServer:
        secret: ""
    asserts:
      - failedTemplate:
          errorMessage: "identityServer.secret must be set"