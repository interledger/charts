suite: Rafiki Auth - Config validation test
templates:
  - configmap.yaml
release:
  name: rafiki-auth
tests:
  # accessToken.deletionDays
  - it: "given accessToken.deletionDays not set then should fail"
    set:
      accessToken:
        deletionDays: ""
    asserts:
      - failedTemplate:
          errorMessage: "accessToken.deletionDays must be set"
  # accessToken.deletionDays
  - it: "given accessToken.expirySeconds not set then should fail"
    set:
      accessToken:
        expirySeconds: ""
    asserts:
      - failedTemplate:
          errorMessage: "accessToken.expirySeconds must be set"
  # port.admin
  - it: "given port.admin not set then should fail"
    set:
      port:
        admin: ""
    asserts:
      - failedTemplate:
          errorMessage: "port.admin must be set"
  # port.auth
  - it: "given port.auth not set then should fail"
    set:
      port:
        auth: ""
    asserts:
      - failedTemplate:
          errorMessage: "port.auth must be set"
  # authServerUrl
  - it: "given authServerUrl not set then should fail"
    set:
      authServerUrl: ""
    asserts:
      - failedTemplate:
          errorMessage: "authServerUrl must be set"
  # workers.cleanup
  - it: "given workers.cleanup not set then should fail"
    set:
      workers:
        cleanup: ""
    asserts:
      - failedTemplate:
          errorMessage: "workers.cleanup must be set"
  # identityServer.domain
  - it: "given identityServer.domain not set then should fail"
    set:
      identityServer:
        domain: ""
    asserts:
      - failedTemplate:
          errorMessage: "identityServer.domain must be set"
  # interaction.incomingPayment
  - it: "given interaction.incomingPayment not set then should fail"
    set:
      interaction:
        incomingPayment: ""
    asserts:
      - failedTemplate:
          errorMessage: "interaction.incomingPayment must be set"
  # interaction.quote
  - it: "given interaction.quote not set then should fail"
    set:
      interaction:
        quote: ""
    asserts:
      - failedTemplate:
          errorMessage: "interaction.quote must be set"
  # port.introspection
  - it: "given port.introspection not set then should fail"
    set:
      port:
        introspection: ""
    asserts:
      - failedTemplate:
          errorMessage: "port.introspection must be set"
  # logLevel
  - it: "given logLevel not set then should fail"
    set:
      logLevel: ""
    asserts:
      - failedTemplate:
          errorMessage: "logLevel must be set"
  # nodeEnv
  - it: "given nodeEnv not set then should fail"
    set:
      nodeEnv: ""
    asserts:
      - failedTemplate:
          errorMessage: "nodeEnv must be set"
  # grant.waitSeconds
  - it: "given grant.waitSeconds not set then should fail"
    set:
      grant:
        waitSeconds: ""
    asserts:
      - failedTemplate:
          errorMessage: "grant.waitSeconds must be set"
  # trustProxy
  - it: "given trustProxy not set then should fail"
    set:
      trustProxy: null
    asserts:
      - failedTemplate:
          errorMessage: "trustProxy must be set"
  # interaction.cookieSameSite
  - it: "given interaction.cookieSameSite not set then should fail"
    set:
      interaction:
        cookieSameSite: ""
    asserts:
      - failedTemplate:
          errorMessage: "interaction.cookieSameSite must be set"

