suite: Rafiki Backend - Configured to create secrets
templates:
  - secret.yaml
set:
  secrets.create: true
  databaseUri.value: 'postgresql://user:password@localhost:5432/database'
  quoteSignatureSecret.value: 'my-secret-signature'
  ilp.streamSecret.value: 'my-ilp-stream-secret'
  redisUri.value: 'redis://localhost:6379'
release:
  name: rafiki-backend

documentSelector:
  kind: Secret
  apiVersion: v1

tests:
  - it: should contain a secret with the correct values
    asserts:
      - equal:
          path: data.REDIS_URL
          value: 'redis://localhost:6379'
          decodeBase64: true
      - equal:
          path: data.DATABASE_URL
          value: 'postgresql://user:password@localhost:5432/database'
          decodeBase64: true
      - equal:
          path: data.SIGNATURE_SECRET
          value: 'my-secret-signature'
          decodeBase64: true
      - equal:
          path: data.STREAM_SECRET
          value: 'my-ilp-stream-secret'
          decodeBase64: true