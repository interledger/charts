suite: testnet-wallet secrets - Secrets
templates:
  - secrets.backend.yaml
set:
  fullnameOverride: test-testnet-wallet
  config:
    backend:
      shouldCreateSecrets: true
release:
  name: test-testnet-wallet
tests:
  - it: 'backend secret should be created when shouldCreateSecrets is true'
    asserts:
      - equal:
          path: metadata.name
          value: test-testnet-wallet-backend
      - equal:
          path: kind
          value: Secret
      - isNotEmpty:
          path: data.DATABASE_URL
      - isNotEmpty:
          path: data.REDIS_URL
  - it: 'backend secret should not be created when shouldCreateSecrets is false'
    set:
      config:
        backend:
          shouldCreateSecrets: false
    asserts:
      - hasDocuments:
          count: 0
