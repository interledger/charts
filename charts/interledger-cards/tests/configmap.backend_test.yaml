suite: interledger-cards backend - generated configmap
templates:
  - configMap.backend.yaml
set:
  fullnameOverride: test-cards
tests:
  - it: 'ConfigMap should be created with correct name and labels'
    asserts:
      - equal:
          path: metadata.name
          value: test-cards-backend
      - equal:
          path: metadata.labels["app.kubernetes.io/name"]
          value: test-cards-backend
      - equal:
          path: metadata.labels["app.kubernetes.io/instance"]
          value: test-cards
      - equal:
          path: metadata.labels["app.kubernetes.io/managed-by"]
          value: Helm
  - it: 'LOG_LEVEL should be mapped correctly from config values'
    set:
      config:
        backend:
          logLevel: debug
    asserts:
      - equal:
          path: data.LOG_LEVEL
          value: debug
  - it: 'LOG_LEVEL should use default value when not specified'
    asserts:
      - equal:
          path: data.LOG_LEVEL
          value: info
  - it: 'ConfigMap should have proper apiVersion and kind'
    asserts:
      - equal:
          path: apiVersion
          value: v1
      - equal:
          path: kind
          value: ConfigMap
