suite: Interledger App - Check configmap
templates:
  - configMap.yaml
set:
  fullnameOverride: wallet-backend
release:
  name: wallet-backend
tests:
  - it: 'should contain a empty BLOCKED_REGIONS in data'
    set:
      config:
        region_blocking:
          blocked_regions: ""
          allowed_wallet_ids: ""
    asserts:
      - equal:
          path: data.BLOCKED_REGIONS
          value: ""
  - it: 'should contain a non-empty BLOCKED_REGIONS in data'
    set:
      config:
        region_blocking:
          blocked_regions: "ZA,US,CA"
          allowed_wallet_ids: "wallet1,wallet2"    
    asserts:
      - equal:
          path: data.BLOCKED_REGIONS
          value: "ZA,US,CA"
      - equal:
          path: data.ALLOWED_WALLET_IDS
          value: "wallet1,wallet2"
  - it: 'should contain GATEHUB_GATEWAY_ID and GATEHUB_PAYWISER_EURO_VAULT_ID in data'
    set:
      config:
        gatehub:
          gateway_id: "example1"
          paywiser_euro_vault_id: "example2"
    asserts:
      - equal:
          path: data.GATEHUB_GATEWAY_ID
          value: "example1"
      - equal:
          path: data.GATEHUB_PAYWISER_EURO_VAULT_ID
          value: "example2"