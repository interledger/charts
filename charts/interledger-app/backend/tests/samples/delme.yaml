fullnameOverride: "wallet-backend"


initialisation:
  serviceAccountName: db-admin
  host: "cloudsql-db-admin"
  port: "5432"
  backend:
    dbname: "wallet_backend"
    username: "wallet_backend"
    password: "MiiS4iCvb1i0GPIYKMtAdukrt8fGrj34"
  pacioli:
    dbname: "pacioli"
    username: "wallet_backend"
    password: "MiiS4iCvb1i0GPIYKMtAdukrt8fGrj34"
  rafiki_backend:
    dbname: "rafiki_backend"
    username: "rafiki_backend"
    password: "dNTqetDocQZBEUXu8WpcRq3tkjAuFB7e"
  rafiki_auth:
    dbname: "rafiki_auth"
    username: "rafiki_auth"
    password: "6NNoEeJAdcYTpcVjQrytjXcUm6gN1URU"

# Database configuration to be used during application runtime
database:
  host: "localhost"
  port: "5432"
  backend:
    dbname: "wallet_backend"
    username: "wallet_backend"
    password: "MiiS4iCvb1i0GPIYKMtAdukrt8fGrj34"
  pacioli:
    dbname: "pacioli"
    username: "wallet_backend"
    password: "MiiS4iCvb1i0GPIYKMtAdukrt8fGrj34"
  rafiki_backend:
    dbname: "rafiki_backend"
    username: "rafiki_backend"
    password: "dNTqetDocQZBEUXu8WpcRq3tkjAuFB7e"
  rafiki_auth:
    dbname: "rafiki_auth"
    username: "rafiki_auth"
    password: "6NNoEeJAdcYTpcVjQrytjXcUm6gN1URU"

service:
  - name: service
    annotations:
      traefik.ingress.kubernetes.io/service.serversscheme: h2c
    type: ClusterIP
    ports:
      # Private gRPC Server (Used by the Admin Portal)
      - port: 8448
        targetPort: 8448
        protocol: TCP
        name: admin
      # Handling of webhooks
      - port: 8080
        targetPort: 8080
        protocol: TCP
        name: http
      # Public gRPC Server (Used by Mobile & External applications)
      - port: 8443
        targetPort: 8443
        protocol: TCP
        name: grpc
        appProtocol: HTTP2

config:
  environment: dev
  log_level: "debug"
  usd_ledger_id: "1"
  noop_equity_account_id: "00000000-0000-0000-0000-000000000000"
  google_oauth2_client_id: "google_oauth"
  authorisation_port: "8082"
  open_payments_port: "8081"

  admin:
    # Application Audience (AUD) Tag
    policy_aud: "AABBB"
    team_domain: "AABBB"

  twilio:
    account_sid: "AABBB"
    service_sid: "AABBB"
    account_token: AABBB"

  zenddesk:
    user: "support@interledger-app.dev"
    token: "0000000000000000000000"

  kratos:
    url: "http://wallet-kratos-public"
    admin_url: "http://wallet-kratos-admin"
  
  rafiki:
    graphql:
      auth_url: "http://rafiki-auth-service:3003/graphql"
      backend_url: "http://rafiki-backend-service:3001/graphql"

  temporal:
    url: "temporal-frontend-headless:7233"

  otel:
    exporter_otlp_endpoint: "grpc://api.honeycomb.io:443"
    exporter_otlp_headers: "x-honeycomb-team=1234567890123456789012"
    service_name: "backend"

  vault:
    url: "http://vault.vault:8200"
    transit_engine_path: "transit/prod/backend"

  twitter:
    redirect_url: "https://example.app/connect/twitter"
    client_id: "00000000000000000000000000000"
    client_secret: "00000000000000000000000000000"
    bearer_token: "000000000000000000000000"

  discord:
    redirect_url: "https://example.app/connect/interledger-app"

  astra:
    code_exchange_redirect: "https://A000000000000.x.pipedream.net/"
    client_id: "A0000000000000000000000000000000"
    client_secret: "A0000000000000000000000000000000"
    account_number: "A00000000000000000000000"
    routing_number: "A00000000"
    webhook_bearer_token: "A0000000000000000000000000000000"

  gatehub:
    app_id: "A0000000-0000-0000-0000-000000000000"
    secret: "A000000000000000000000000000000000000000"
    webhook_secret: "A000000000000000000000000000000000000000000000000000000000000000"

  chimoney:
    webhook_secret: "A0000000000000000000000000000000000000"
    token: "A000000000000000000000000000000000000000000000000000000000000000"

  dato:
    api_token: "${secrets.dato_token}"

  sendgrid:
    api_key: "${secrets.sendgrid.api_key}"

  smarty:
    auth_id: "000000000000000000000000"
    auth_token: "000000000000000000000000"

  pusher:
    addr: "${secrets.pusher.addr}"

  segment:
    key: "000000000000000000000000"

  slack:
    token: "000000000000000000000000"
  
  basis_theory:
    api_key: "${secrets.basis_theory.api_key}"
    token: "${secrets.basis_theory.token}"

  persona:
    token: "${secrets.persona.token}"
    webhook_token: "${secrets.persona.webhook_token}"

  cdn:
    key: "00000000000000000000000"
  
  xago:
    api_secret: "${secrets.xago.api_secret}"
    api_public_key: "${secrets.xago.api_public_key}"

  sentry:
    dsn: "${secrets.sentry_dsn}"

  pti:
    client_id: "${secrets.pti.client_id}"
    # No quotes for jwk because it is handled elsewhere
    jwk: ${secrets.pti.jwk}

serviceAccount:
  create: false
  name: wallet-backend-sa
  namespace: wallet
  annotations:
    iam.gke.io/gcp-service-account: "wallet-backend-sa"
sidecars:
  - name: cloud-sql-proxy
    image:
      name: cloud-sql-connectors/cloud-sql-proxy
      tag: latest
      repository: gcr.io
    args:
      - "wallet-451208:europe-west1:wallet-development-pg-ha-fc79f4d8"
      - "--structured-logs"
    securityContext:
      runAsNonRoot: true